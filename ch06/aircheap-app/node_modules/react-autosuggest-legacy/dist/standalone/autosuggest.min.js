!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("React")):"function"==typeof define&&define.amd?define(["React"],t):"object"==typeof exports?exports.Autosuggest=t(require("React")):e.Autosuggest=t(e.React)}(this,function(e){return function(e){function t(s){if(n[s])return n[s].exports;var o=n[s]={exports:{},id:s,loaded:!1};return e[s].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},l=function(){function e(e,t){var n=[],s=!0,o=!1,u=void 0;try{for(var i,r=e[Symbol.iterator]();!(s=(i=r.next()).done)&&(n.push(i.value),!t||n.length!==t);s=!0);}catch(l){o=!0,u=l}finally{try{!s&&r["return"]&&r["return"]()}finally{if(o)throw u}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,n,s){return n&&e(t.prototype,n),s&&e(t,s),t}}(),c=n(1),f=s(c),d=n(2),h=s(d),p=n(4),S=s(p),y=n(6),v=s(y),b=function(e){function t(e){o(this,t);var n=u(this,Object.getPrototypeOf(t).call(this));return n.cache={},n.state={value:e.value||e.defaultValue||"",suggestions:null,focusedSectionIndex:null,focusedSuggestionIndex:null,valueBeforeUpDown:null},n.isControlledComponent="undefined"!=typeof e.value,n.suggestionsFn=(0,h["default"])(e.suggestions,100),n.onChange=e.inputAttributes.onChange||function(){},n.onFocus=e.inputAttributes.onFocus||function(){},n.onBlur=e.inputAttributes.onBlur||function(){},n.lastSuggestionsInputValue=null,n.justUnfocused=!1,n.justClickedOnSuggestion=!1,n.justPressedUpDown=!1,n.justPressedEsc=!1,n.onInputChange=n.onInputChange.bind(n),n.onInputKeyDown=n.onInputKeyDown.bind(n),n.onInputFocus=n.onInputFocus.bind(n),n.onInputBlur=n.onInputBlur.bind(n),n}return i(t,e),a(t,[{key:"componentWillReceiveProps",value:function(e){if(this.isControlledComponent){var t=this.refs.input.value;e.value===t||this.justClickedOnSuggestion||this.justPressedUpDown||this.justPressedEsc||this.handleValueChange(e.value)}}},{key:"resetSectionIterator",value:function(e){this.isMultipleSections(e)?v["default"].setData(e.map(function(e){return e.suggestions.length})):v["default"].setData(null===e?[]:e.length)}},{key:"isMultipleSections",value:function(e){return null!==e&&e.length>0&&"undefined"!=typeof e[0].suggestions}},{key:"setSuggestionsState",value:function(e){this.resetSectionIterator(e),this.setState({suggestions:e,focusedSectionIndex:null,focusedSuggestionIndex:null,valueBeforeUpDown:null})}},{key:"suggestionsExist",value:function(e){return this.isMultipleSections(e)?e.some(function(e){return e.suggestions.length>0}):null!==e&&e.length>0}},{key:"showSuggestions",value:function(e){var t=this,n=e.toLowerCase();this.lastSuggestionsInputValue=e,this.props.showWhen(e)?this.props.cache&&this.cache[n]?this.setSuggestionsState(this.cache[n]):this.suggestionsFn(e,function(s,o){if(t.lastSuggestionsInputValue===e){if(s)throw s;t.suggestionsExist(o)||(o=null),t.props.cache&&(t.cache[n]=o),t.setSuggestionsState(o)}}):this.setSuggestionsState(null)}},{key:"suggestionIsFocused",value:function(){return null!==this.state.focusedSuggestionIndex}},{key:"getSuggestion",value:function(e,t){return this.isMultipleSections(this.state.suggestions)?this.state.suggestions[e].suggestions[t]:this.state.suggestions[t]}},{key:"getFocusedSuggestion",value:function(){return this.suggestionIsFocused()?this.getSuggestion(this.state.focusedSectionIndex,this.state.focusedSuggestionIndex):null}},{key:"getSuggestionValue",value:function(e,t){var n=this.getSuggestion(e,t);if("object"===("undefined"==typeof n?"undefined":g(n))){if(this.props.suggestionValue)return this.props.suggestionValue(n);throw new Error("When <suggestion> is an object, you must implement the suggestionValue() function to specify how to set input's value when suggestion selected.")}return n.toString()}},{key:"onSuggestionUnfocused",value:function(){var e=this.getFocusedSuggestion();null===e||this.justUnfocused||(this.props.onSuggestionUnfocused(e),this.justUnfocused=!0)}},{key:"onSuggestionFocused",value:function(e,t){this.onSuggestionUnfocused();var n=this.getSuggestion(e,t);this.props.onSuggestionFocused(n),this.justUnfocused=!1}},{key:"scrollToElement",value:function(e,t,n){if("bottom"===n){var s=t.offsetTop+t.offsetHeight-e.scrollTop-e.offsetHeight;s>0&&(e.scrollTop+=s)}else{var o=e.scrollTop-t.offsetTop;o>0&&(e.scrollTop-=o)}}},{key:"scrollToSuggestion",value:function(e,t,n){var s="down"===e?"bottom":"top";if(null===n){if("down"!==e)return;s="top";var o=v["default"].next([null,null]),u=l(o,2);t=u[0],n=u[1]}else v["default"].isLast([t,n])&&"up"===e&&(s="bottom");var i=this.refs.suggestions,r=this.getSuggestionRef(t,n),g=this.refs[r];this.scrollToElement(i,g,s)}},{key:"focusOnSuggestionUsingKeyboard",value:function(e,t){var n=this,s=l(t,2),o=s[0],u=s[1],i={focusedSectionIndex:o,focusedSuggestionIndex:u,value:null===u?this.state.valueBeforeUpDown:this.getSuggestionValue(o,u)};this.justPressedUpDown=!0,null===this.state.valueBeforeUpDown&&(i.valueBeforeUpDown=this.state.value),null===u?this.onSuggestionUnfocused():this.onSuggestionFocused(o,u),this.props.scrollBar&&this.scrollToSuggestion(e,o,u),i.value!==this.state.value&&this.onChange(i.value),this.setState(i),setTimeout(function(){return n.justPressedUpDown=!1})}},{key:"onSuggestionSelected",value:function(e){var t=this.getFocusedSuggestion();this.props.onSuggestionUnfocused(t),this.props.onSuggestionSelected(t,e)}},{key:"onInputChange",value:function(e){var t=e.target.value;this.onSuggestionUnfocused(),this.handleValueChange(t),this.showSuggestions(t)}},{key:"handleValueChange",value:function(e){e!==this.state.value&&(this.onChange(e),this.setState({value:e}))}},{key:"onInputKeyDown",value:function(e){var t=this,n=void 0;switch(e.keyCode){case 13:null!==this.state.valueBeforeUpDown&&this.suggestionIsFocused()&&(this.onSuggestionSelected(e),this.setSuggestionsState(null));break;case 27:n={suggestions:null,focusedSectionIndex:null,focusedSuggestionIndex:null,valueBeforeUpDown:null},null!==this.state.valueBeforeUpDown?n.value=this.state.valueBeforeUpDown:null===this.state.suggestions&&(n.value=""),this.onSuggestionUnfocused(),this.justPressedEsc=!0,"string"==typeof n.value&&n.value!==this.state.value&&this.onChange(n.value),this.setState(n),setTimeout(function(){return t.justPressedEsc=!1});break;case 38:null===this.state.suggestions?this.showSuggestions(this.state.value):this.focusOnSuggestionUsingKeyboard("up",v["default"].prev([this.state.focusedSectionIndex,this.state.focusedSuggestionIndex])),e.preventDefault();break;case 40:null===this.state.suggestions?this.showSuggestions(this.state.value):this.focusOnSuggestionUsingKeyboard("down",v["default"].next([this.state.focusedSectionIndex,this.state.focusedSuggestionIndex]))}}},{key:"onInputFocus",value:function(e){this.justClickedOnSuggestion||this.showSuggestions(this.state.value),this.onFocus(e)}},{key:"onInputBlur",value:function(e){this.onSuggestionUnfocused(),this.justClickedOnSuggestion||this.onBlur(e),this.setSuggestionsState(null)}},{key:"isSuggestionFocused",value:function(e,t){return e===this.state.focusedSectionIndex&&t===this.state.focusedSuggestionIndex}},{key:"onSuggestionMouseEnter",value:function(e,t){this.isSuggestionFocused(e,t)||this.onSuggestionFocused(e,t),this.setState({focusedSectionIndex:e,focusedSuggestionIndex:t})}},{key:"onSuggestionMouseLeave",value:function(e,t){this.isSuggestionFocused(e,t)&&this.onSuggestionUnfocused(),this.setState({focusedSectionIndex:null,focusedSuggestionIndex:null})}},{key:"onSuggestionMouseDown",value:function(e,t,n){var s=this,o=this.getSuggestionValue(e,t);this.justClickedOnSuggestion=!0,this.onSuggestionSelected(n),o!==this.state.value&&this.onChange(o),this.setState({value:o,suggestions:null,focusedSectionIndex:null,focusedSuggestionIndex:null,valueBeforeUpDown:null},function(){setTimeout(function(){s.refs.input.focus(),s.justClickedOnSuggestion=!1})})}},{key:"getSuggestionId",value:function(e,t){return null===t?null:"react-autosuggest-"+this.props.id+"-"+this.getSuggestionRef(e,t)}},{key:"getSuggestionRef",value:function(e,t){return"suggestion-"+(null===e?"":e)+"-"+t}},{key:"renderSuggestionContent",value:function(e){if(this.props.suggestionRenderer)return this.props.suggestionRenderer(e,this.state.valueBeforeUpDown||this.state.value);if("object"===("undefined"==typeof e?"undefined":g(e)))throw new Error("When <suggestion> is an object, you must implement the suggestionRenderer() function to specify how to render it.");return e.toString()}},{key:"renderSuggestionsList",value:function(e,t,n){var s=this;return t.map(function(t,o){var u=e(o,"suggestion",n===s.state.focusedSectionIndex&&o===s.state.focusedSuggestionIndex&&"suggestionIsFocused"),i=s.getSuggestionRef(n,o);return f["default"].createElement("li",r({id:s.getSuggestionId(n,o)},u,{role:"option",ref:i,key:i,onMouseEnter:function(){return s.onSuggestionMouseEnter(n,o)},onMouseLeave:function(){return s.onSuggestionMouseLeave(n,o)},onMouseDown:function(e){return s.onSuggestionMouseDown(n,o,e)}}),s.renderSuggestionContent(t))})}},{key:"renderSuggestions",value:function(e){var t=this;return null===this.state.suggestions?null:this.isMultipleSections(this.state.suggestions)?f["default"].createElement("div",r({id:"react-autosuggest-"+this.props.id},e("suggestions","suggestions"),{ref:"suggestions",role:"listbox"}),this.state.suggestions.map(function(n,s){var o=n.sectionName?f["default"].createElement("div",e("sectionName-"+s,"sectionName"),n.sectionName):null;return 0===n.suggestions.length?null:f["default"].createElement("div",r({},e("section-"+s,"section"),{key:"section-"+s}),o,f["default"].createElement("ul",e("sectionSuggestions-"+s,"sectionSuggestions"),t.renderSuggestionsList(e,n.suggestions,s)))})):f["default"].createElement("ul",r({id:"react-autosuggest-"+this.props.id},e("suggestions","suggestions"),{ref:"suggestions",role:"listbox"}),this.renderSuggestionsList(e,this.state.suggestions,null))}},{key:"render",value:function(){var e=this.props,t=e.id,n=e.inputAttributes,s=this.state,o=s.value,u=s.suggestions,i=s.focusedSectionIndex,l=s.focusedSuggestionIndex,g=(0,S["default"])(this.props.theme),a=this.getSuggestionId(i,l);return f["default"].createElement("div",g("root","root"),f["default"].createElement("input",r({},n,{type:n.type||"text",value:o,autoComplete:"off",role:"combobox","aria-autocomplete":"list","aria-owns":"react-autosuggest-"+t,"aria-expanded":null!==u,"aria-activedescendant":a,ref:"input",onChange:this.onInputChange,onKeyDown:this.onInputKeyDown,onFocus:this.onInputFocus,onBlur:this.onInputBlur})),this.renderSuggestions(g))}}]),t}(c.Component);b.propTypes={value:c.PropTypes.string,defaultValue:c.PropTypes.string,suggestions:c.PropTypes.func.isRequired,suggestionRenderer:c.PropTypes.func,suggestionValue:c.PropTypes.func,showWhen:c.PropTypes.func,onSuggestionSelected:c.PropTypes.func,onSuggestionFocused:c.PropTypes.func,onSuggestionUnfocused:c.PropTypes.func,inputAttributes:c.PropTypes.object,cache:c.PropTypes.bool,id:c.PropTypes.string,scrollBar:c.PropTypes.bool,theme:c.PropTypes.object},b.defaultProps={showWhen:function(e){return e.trim().length>0},onSuggestionSelected:function(){},onSuggestionFocused:function(){},onSuggestionUnfocused:function(){},inputAttributes:{},cache:!0,id:"1",scrollBar:!1,theme:{root:"react-autosuggest",suggestions:"react-autosuggest__suggestions",suggestion:"react-autosuggest__suggestion",suggestionIsFocused:"react-autosuggest__suggestion--focused",section:"react-autosuggest__suggestions-section",sectionName:"react-autosuggest__suggestions-section-name",sectionSuggestions:"react-autosuggest__suggestions-section-suggestions"}},t["default"]=b},function(t,n){t.exports=e},function(e,t,n){var s=n(3);e.exports=function(e,t,n){function o(){var a=s()-l;t>a&&a>0?u=setTimeout(o,t-a):(u=null,n||(g=e.apply(r,i),u||(r=i=null)))}var u,i,r,l,g;return null==t&&(t=100),function(){r=this,i=arguments,l=s();var a=n&&!u;return u||(u=setTimeout(o,t)),a&&(g=e.apply(r,i),r=i=null),g}}},function(e,t){function n(){return(new Date).getTime()}e.exports=Date.now||n},function(e,t,n){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0});var u=n(5),i=s(u),r=function(e){return e};t["default"]=function(e){return function(t){for(var n=arguments.length,s=Array(n>1?n-1:0),u=1;n>u;u++)s[u-1]=arguments[u];var l=s.map(function(t){return e[t]}).filter(r);return"string"==typeof l[0]?{key:t,className:l.join(" ")}:{key:t,style:i["default"].apply(void 0,[{}].concat(o(l)))}}},e.exports=t["default"]},function(e,t){"use strict";function n(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function s(e){var t=Object.getOwnPropertyNames(e);return Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(e))),t.filter(function(t){return o.call(e,t)})}var o=Object.prototype.propertyIsEnumerable;e.exports=Object.assign||function(e,t){for(var o,u,i=n(e),r=1;r<arguments.length;r++){o=arguments[r],u=s(Object(o));for(var l=0;l<u.length;l++)i[u[l]]=o[u[l]]}return i}},function(e,t){"use strict";function n(e){a=e,c="object"===("undefined"==typeof a?"undefined":g(a))}function s(e){for(null===e?e=0:e++;e<a.length&&0===a[e];)e++;return e===a.length?null:e}function o(e){for(null===e?e=a.length-1:e--;e>=0&&0===a[e];)e--;return-1===e?null:e}function u(e){var t=l(e,2),n=t[0],o=t[1];return c?null===o||o===a[n]-1?(n=s(n),null===n?[null,null]:[n,0]):[n,o+1]:0===a||o===a-1?[null,null]:null===o?[null,0]:[null,o+1]}function i(e){var t=l(e,2),n=t[0],s=t[1];return c?null===s||0===s?(n=o(n),null===n?[null,null]:[n,a[n]-1]):[n,s-1]:0===a||0===s?[null,null]:null===s?[null,a-1]:[null,s-1]}function r(e){return null===u(e)[1]}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){var n=[],s=!0,o=!1,u=void 0;try{for(var i,r=e[Symbol.iterator]();!(s=(i=r.next()).done)&&(n.push(i.value),!t||n.length!==t);s=!0);}catch(l){o=!0,u=l}finally{try{!s&&r["return"]&&r["return"]()}finally{if(o)throw u}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},a=void 0,c=void 0;t["default"]={setData:n,next:u,prev:i,isLast:r}}])});